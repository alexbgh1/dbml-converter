import{d as N}from"./chunk-3XMAMM5N.js";import{a as q,b as R,d as X,e as Y,f as G,g as H,h as J,i as K,j as Q}from"./chunk-3XN4EZ2S.js";import{d as B,e as A,j as U,k as z,l as $}from"./chunk-YXXGOJWJ.js";import"./chunk-K6IQZWFC.js";import{h as j}from"./chunk-MX3DAUQE.js";import{$ as b,$a as r,Db as I,Ha as w,Ma as f,Sa as v,T as S,Ua as u,Va as P,Wa as C,Ya as V,Za as O,_ as g,_a as i,ab as x,bb as E,cb as _,db as c,eb as L,fb as T,nb as a,ob as F,pb as M,vb as D,wb as k,xa as l}from"./chunk-LWG2RFLJ.js";function W(t){if(!t||t.indexOf(".")===-1)return"text";switch(t.split(".").pop()?.toLowerCase()){case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"json":return"json";case"html":return"html";case"css":return"css";case"scss":return"scss";case"sass":return"scss";case"sql":return"sql";case"py":return"python";case"java":return"java";case"cs":return"csharp";case"php":return"php";case"rb":return"ruby";case"go":return"go";case"rs":return"rust";case"cpp":case"cc":case"cxx":return"cpp";case"c":return"c";case"xml":return"xml";case"yaml":case"yml":return"yaml";case"md":return"markdown";case"sh":case"bash":return"bash";case"prisma":return"prisma";case"dbml":return"dbml";default:return"text"}}var ne=[[["","editor-explorer",""]],[["","editor-area",""]]],ie=["[editor-explorer]","[editor-area]"],y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-editor-view"]],ngContentSelectors:ie,decls:6,vars:0,consts:[[1,"flex","items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","h-full","w-full"],[1,"sm:w-[360px]","sm:border-r","border-border-muted"],[1,"flex-1"]],template:function(e,o){e&1&&(L(ne),i(0,"div",0)(1,"div",1)(2,"aside",2),T(3),r(),i(4,"section",3),T(5,1),r()()())},dependencies:[j],encapsulation:2})};var oe=(t,n)=>n.id;function le(t,n){if(t&1&&x(0,"open-folder-icon",26),t&2){let e=c();P(e.expandedFolders().has("input")?"text-text":"text-text-muted")}}function re(t,n){t&1&&x(0,"folder-icon",13)}function de(t,n){if(t&1){let e=E();i(0,"div",15)(1,"div",27),_("click",function(){g(e);let d=c();return b(d.selectFileInEditor(null))}),x(2,"file-icon",26),i(3,"span",14),a(4,"input.txt"),r()()()}if(t&2){let e=c();l(),u("bg-bg-secondary",e.selectedFile()===null),l(),u("text-text-muted",e.selectedFile()!==null)("text-accent",e.selectedFile()===null),l(),u("text-accent",e.selectedFile()===null)("text-zinc-300",e.selectedFile()!==null)}}function ae(t,n){if(t&1&&x(0,"open-folder-icon",26),t&2){let e=c(2);u("text-text",e.expandedFolders().has("output"))("text-text-muted",!e.expandedFolders().has("output"))}}function ce(t,n){t&1&&x(0,"folder-icon",13)}function se(t,n){if(t&1){let e=E();i(0,"div",27),_("click",function(){let d=g(e).$implicit,p=c(3);return b(p.selectFileInEditor(d))}),x(1,"file-icon",26),i(2,"span",14),a(3),r(),i(4,"span",29),a(5),D(6,"codeChars"),r()()}if(t&2){let e,o,d,p,h,m=n.$implicit,s=c(3);u("bg-bg-secondary",((e=s.selectedFile())==null?null:e.id)===m.id),l(),u("text-text-muted",((o=s.selectedFile())==null?null:o.id)!==m.id)("text-accent",((d=s.selectedFile())==null?null:d.id)===m.id),l(),u("text-zinc-300",((p=s.selectedFile())==null?null:p.id)!==m.id)("text-accent",((h=s.selectedFile())==null?null:h.id)===m.id),l(),F(m.filename),l(2),F(k(6,12,m.content))}}function pe(t,n){if(t&1&&(i(0,"div",30),V(1,se,7,14,"div",31,oe),r()),t&2){let e=c(2);l(),O(e.files())}}function me(t,n){if(t&1){let e=E();i(0,"div",10)(1,"div",11),_("click",function(){g(e);let d=c();return b(d.toggleFolder("output"))}),f(2,ae,1,4,"open-folder-icon",28)(3,ce,1,0,"folder-icon",13),i(4,"span",14),a(5,"output"),r(),i(6,"span",29),a(7),r()(),f(8,pe,3,0,"div",30),r()}if(t&2){let e=c();l(2),C(e.expandedFolders().has("output")?2:3),l(2),u("text-text",e.expandedFolders().has("output"))("text-zinc-300",!e.expandedFolders().has("output")),l(3),F(e.files().length),l(),C(e.expandedFolders().has("output")?8:-1)}}function ue(t,n){if(t&1){let e=E();i(0,"div",24)(1,"app-dbml-code-editor",32),_("codeChange",function(d){g(e);let p=c();return b(p.onDbmlInput(d))}),r(),i(2,"div",33)(3,"button",34),_("click",function(){g(e);let d=c();return b(d.handleLoadExample())}),a(4," Load example DBML code "),r()()()}if(t&2){let e=c();l(),v("code",e.dbmlContent())("height","400px")}}function xe(t,n){if(t&1&&(i(0,"div",25)(1,"div",35)(2,"div",36)(3,"span",37),a(4),r(),i(5,"span",38),a(6),D(7,"codeChars"),r()(),i(8,"div",39),x(9,"copy-file-button",40)(10,"download-file-button",41),r()(),i(11,"div",42),x(12,"app-code-viewer",43),r()()),t&2){let e,o,d,p,h,m,s=c();l(4),F((e=s.selectedFile())==null?null:e.filename),l(2),M("",k(7,8,(o=s.selectedFile())==null?null:o.content)," chars"),l(3),v("textToCopy",((d=s.selectedFile())==null?null:d.content)||""),l(),v("textToDownload",((p=s.selectedFile())==null?null:p.content)||"")("fileName",((h=s.selectedFile())==null?null:h.filename)||"file.txt"),l(2),v("height","400px")("code",((m=s.selectedFile())==null?null:m.content)||"")("language",s.language())}}var Z=class t{stateService=S(X);router=S(N);dbmlContent=this.stateService.dbmlContent;files=this.stateService.files;selectedFile=this.stateService.selectedFile;expandedFolders=this.stateService.expandedFolders;isConverting=this.stateService.isConverting;selectedOutputType=this.stateService.selectedOutputType;OUTPUT_OPTIONS=q;DBML_DEFAULT_VALUE=B;language=I(()=>W(this.selectedFile()?.filename||""));expandingButtonOptions=I(()=>Object.values(R).map(n=>n));onDbmlInput(n){this.stateService.onDbmlInput(n)}handleConvert(){this.stateService.handleConvert()}clearAll(){this.stateService.clearAll()}setOutputType(n){this.stateService.setOutputType(n)}toggleFolder(n){let e=new Set(this.expandedFolders());e.has(n)?e.delete(n):e.add(n),this.expandedFolders.set(e)}selectFileInEditor(n){this.stateService.selectedFile.set(n)}handleLoadExample(){window.confirm("Loading the example will overwrite your current DBML code. Do you want to continue?")&&this.dbmlContent.set(A)}goToPreview(){this.router.navigate(["/preview-mode"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-editor-mode"]],hostAttrs:[1,"flex-1"],decls:34,vars:12,consts:[["editor-explorer",""],[1,"flex","items-center","justify-between","border-b","border-border-muted","bg-bg-secondary"],[1,"py-2","text-sm","font-medium","text-zinc-300","px-4"],[1,"flex","gap-2","mr-2"],[1,"flex","items-center","gap-2","cursor-pointer","px-2","bg-accent/60","text-white","rounded","disabled:cursor-not-allowed","disabled:opacity-50",3,"click","disabled"],[1,"cursor-pointer","px-2","rounded","text-text-muted","hover:text-text",3,"click"],[1,"mt-4","px-4"],[1,"text-xs","font-medium","text-text-muted","block","mb-2"],[3,"optionSelected","options","selectedId"],[1,"flex-1","overflow-auto","p-2","px-3"],[1,"mb-2"],[1,"flex","items-center","gap-1","px-2","py-1","hover:bg-bg-secondary","rounded","cursor-pointer",3,"click"],["className","w-4 h-4 mr-2",3,"class"],["className","w-4 h-4 text-text-muted mr-2"],[1,"text-sm"],[1,"ml-6"],["editor-area",""],[1,"flex","flex-col","h-full"],[1,"border-y","border-t-0","border-b","border-border-muted","bg-bg-secondary"],[1,"flex"],[1,"px-4","py-2","bg-zinc-900","border-r","border-border-muted","text-sm","flex","items-center","gap-2"],["className","w-4 h-4 text-accent"],[1,"font-mono","text-accent","text-sm"],[1,"flex-1","overflow-auto","p-6"],[1,"h-full"],[1,"h-full","bg-bg-secondary","border","border-border-muted","rounded-lg"],["className","w-4 h-4 mr-2"],[1,"flex","items-center","gap-2","px-2","py-1","hover:bg-bg-secondary","rounded","cursor-pointer",3,"click"],["className","w-4 h-4 mr-2",3,"text-text","text-text-muted"],[1,"ml-auto","text-xs","text-text-muted"],[1,"ml-6","space-y-1"],[1,"flex","items-center","gap-2","px-2","py-1","hover:bg-bg-secondary","rounded","cursor-pointer",3,"bg-bg-secondary"],[3,"codeChange","code","height"],[1,"mt-2"],[1,"text-xs","text-accent","hover:underline",3,"click"],[1,"flex","items-center","justify-between","px-4","py-3","border-b","border-border-muted"],[1,"flex","items-center","gap-2"],[1,"font-mono","text-sm","text-zinc-300"],[1,"text-xs","text-text-muted"],[1,"flex","gap-2"],[3,"textToCopy"],[3,"textToDownload","fileName"],[1,"p-4","h-full","overflow-hidden"],[3,"height","code","language"]],template:function(e,o){if(e&1&&(i(0,"app-editor-view")(1,"div",0)(2,"div",1)(3,"h2",2),a(4,"Explorer"),r(),i(5,"div",3)(6,"button",4),_("click",function(){return o.handleConvert()}),a(7," Convert "),r(),i(8,"button",5),_("click",function(){return o.clearAll()}),a(9," Clear "),r()()(),i(10,"div",6)(11,"label",7),a(12,"Output format:"),r(),i(13,"app-expanding-circle-button",8),_("optionSelected",function(p){return o.setOutputType(p)}),r()(),i(14,"div",9)(15,"div",10)(16,"div",11),_("click",function(){return o.toggleFolder("input")}),f(17,le,1,2,"open-folder-icon",12)(18,re,1,0,"folder-icon",13),i(19,"span",14),a(20,"input"),r()(),f(21,de,5,10,"div",15),r(),f(22,me,9,7,"div",10),r()(),i(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"div",20),x(28,"file-icon",21),i(29,"span",22),a(30),r()()()(),i(31,"div",23),f(32,ue,5,2,"div",24)(33,xe,13,10,"div",25),r()()()()),e&2){let d;l(6),v("disabled",o.isConverting()),l(7),v("options",o.expandingButtonOptions())("selectedId",o.selectedOutputType()),l(4),C(o.expandedFolders().has("input")?17:18),l(2),u("text-text",o.expandedFolders().has("input"))("text-zinc-300",!o.expandedFolders().has("input")),l(2),C(o.expandedFolders().has("input")?21:-1),l(),C(o.files().length>0?22:-1),l(8),M(" ",o.selectedFile()?(d=o.selectedFile())==null?null:d.filename:"input.txt"," "),l(2),C(o.selectedFile()===null?32:33)}},dependencies:[G,y,H,J,K,Q,$,z,U,Y],encapsulation:2})};export{Z as EditorModeComponent};
