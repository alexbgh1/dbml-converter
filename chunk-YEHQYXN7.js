import{a as L,b as B,c as A,d as J,e as V,f as R,g as x,h as z,i as _,j as h}from"./chunk-3XN4EZ2S.js";import{d as F,e as I,f as j,g as U,j as k}from"./chunk-YXXGOJWJ.js";import"./chunk-K6IQZWFC.js";import"./chunk-MX3DAUQE.js";import{$a as r,Db as N,Ha as C,Ma as u,Sa as d,T as D,Va as f,Wa as m,Ya as O,Za as E,_a as a,ab as l,cb as c,db as s,eb as P,fb as M,na as S,nb as p,pb as g,vb as T,wb as y,xa as i}from"./chunk-LWG2RFLJ.js";var q=["*"];function G(t,o){if(t&1&&l(0,"chevron-down-icon",4),t&2){let e=s();f(e.isOpen()?"[&>svg]:text-accent":"")}}function H(t,o){t&1&&l(0,"chevron-right-icon",4)}function K(t,o){if(t&1&&l(0,"app-code-viewer",13),t&2){let e=s(2);d("code",e.codeContent)("height","200px")}}function Q(t,o){t&1&&(a(0,"div",12),M(1,0,null,K,1,2),r())}var b=class t{fileName="file.txt";charsCount=0;codeContent="";isOpen=S(!1);onToggle(){this.isOpen.set(!this.isOpen())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["file-drop-down"]],inputs:{fileName:"fileName",charsCount:"charsCount",codeContent:"codeContent"},ngContentSelectors:q,decls:16,vars:15,consts:[[1,"mb-2","border","rounded-lg","overflow-hidden"],[1,"w-full","px-4","py-3","flex","items-center","justify-between","text-left",3,"click"],[1,"flex","items-center","gap-2"],["className","w-5 h-5 text-text-muted mr-2",3,"class"],["className","w-5 h-5 text-text-muted mr-2"],[1,"flex","items-center"],["className","w-4 h-4 text-text-muted mr-2"],[1,"font-mono","text-sm"],[1,"text-text-muted","inline-flex","items-center","justify-center","rounded-md","border","px-2","py-0.5","font-medium","w-fit","whitespace-nowrap","shrink-0","overflow-hidden","ml-2","text-xs","border-border-muted"],[1,"flex","gap-1"],[3,"textToCopy"],[3,"textToDownload","fileName"],[1,"px-4","py-3","bg-accent/5"],[3,"code","height"]],template:function(e,n){e&1&&(P(),a(0,"div",0)(1,"button",1),c("click",function(){return n.onToggle()}),a(2,"section",2),u(3,G,1,2,"chevron-down-icon",3)(4,H,1,0,"chevron-right-icon",4),a(5,"div",5),l(6,"file-icon",6),a(7,"span",7),p(8),r()(),a(9,"div",2)(10,"span",8),p(11),r()()(),a(12,"section",9),l(13,"copy-file-button",10)(14,"download-file-button",11),r()(),u(15,Q,3,0,"div",12),r()),e&2&&(f(n.isOpen()?"border-b border-accent":"hover:border-zinc-600 border-border-muted"),i(),f(n.isOpen()?"rounded-t-lg border-b border-accent bg-accent/10":"rounded-lg  bg-bg-secondary"),i(2),m(n.isOpen()?3:4),i(3),f(n.isOpen()?"[&>svg]:text-accent":""),i(),f(n.isOpen()?"font-medium text-text":"text-text-muted"),i(),g(" ",n.fileName," "),i(3),g("",n.charsCount," chars"),i(2),d("textToCopy",n.codeContent),i(),d("textToDownload",n.codeContent)("fileName",n.fileName),i(),m(n.isOpen()?15:-1))},dependencies:[x,_,h,U,j,k],encapsulation:2})};var W=(t,o)=>o.fileName;function Z(t,o){if(t&1&&(a(0,"div",16)(1,"div",18),l(2,"copy-file-button",19)(3,"download-file-button",20),r(),l(4,"app-code-viewer",21),r()),t&2){let e=s();i(2),d("textToCopy",e.schema()?e.formatJson(e.schema()):""),i(),d("textToDownload",e.schema()?e.formatJson(e.schema()):"")("fileName","schema.json"),i(),d("code",e.schema()?e.formatJson(e.schema()):"")("height","400px")}}function ee(t,o){if(t&1&&(l(0,"file-drop-down",23),T(1,"codeChars")),t&2){let e=o.$implicit;d("fileName",e.fileName)("charsCount",y(1,3,e.code))("codeContent",e.code)}}function te(t,o){if(t&1&&(a(0,"div",22),O(1,ee,2,5,"file-drop-down",23,W),l(3,"file-drop-down",24),T(4,"codeChars"),r()),t&2){let e=s(2);i(),E(e.getEntities(e.nestjsCode().entities)),i(2),d("charsCount",y(4,2,e.nestjsCode().module))("codeContent",e.nestjsCode().module)}}function ne(t,o){if(t&1&&(a(0,"div",17),u(1,te,5,4,"div",22),r()),t&2){let e=s();i(),m(e.nestjsCode()?1:-1)}}function oe(t,o){if(t&1&&(a(0,"div",16)(1,"div",18),l(2,"copy-file-button",19)(3,"download-file-button",20),r(),l(4,"app-code-viewer",25),r()),t&2){let e=s();i(2),d("textToCopy",e.prismaSchema()||""),i(),d("textToDownload",e.prismaSchema()||"")("fileName","schema.prisma"),i(),d("code",e.prismaSchema()||"")("height","400px")}}var $=class t{stateService=D(J);dbmlContent=this.stateService.dbmlContent;schema=this.stateService.schema;nestjsCode=this.stateService.nestjsCode;prismaSchema=this.stateService.prismaSchema;isConverting=this.stateService.isConverting;selectedOutputType=this.stateService.selectedOutputType;OUTPUT_OPTIONS=L;DBML_DEFAULT_VALUE=F;expandingButtonOptions=N(()=>Object.values(B).map(o=>o));onDbmlInput(o){this.stateService.onDbmlInput(o)}handleConvert(){this.stateService.handleConvert()}clearAll(){this.stateService.clearAll()}setOutputType(o){this.stateService.setOutputType(o)}getEntities(o){return Object.entries(o).map(([e,n])=>({fileName:e,code:n}))}formatJson(o){return A(o)}handleLoadExample(){window.confirm("Loading the example will overwrite your current DBML code. Do you want to continue?")&&this.dbmlContent.set(I)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-preview-mode"]],hostAttrs:[1,"flex-1"],decls:26,vars:8,consts:[[1,"grid","grid-cols-1","md:grid-cols-2"],[1,"border-r","border-border-muted","flex","flex-col"],[1,"flex-col","px-6","py-4","pb-6","border-b","border-border-muted","flex","justify-between"],[1,"text-sm","font-medium","text-text"],[1,"flex","justify-between","flex-row","gap-2"],[1,"text-xs","text-accent","hover:underline",3,"click"],[1,"flex","gap-2"],[1,"flex","items-center","gap-2","cursor-pointer","px-2","bg-accent/60","text-white","rounded","disabled:cursor-not-allowed","disabled:opacity-50",3,"click","disabled"],[1,"cursor-pointer","px-2","rounded","text-text-muted","hover:text-text",3,"click"],[1,"py-6","px-6"],[3,"codeChange","code","height"],[1,"px-6","py-4","border-b","border-border-muted"],[1,"text-sm","font-medium","text-zinc-300"],[1,"flex","flex-wrap","items-center","gap-2"],[1,"text-sm","text-text-muted"],[3,"optionSelected","options","selectedId"],[1,"py-6","px-6","relative"],[1,"w-full","overflow-y-auto","rounded-sm"],[1,"absolute","flex","right-10","top-8","gap-2"],[3,"textToCopy"],[3,"textToDownload","fileName"],["language","typescript",3,"code","height"],[1,"p-6"],[3,"fileName","charsCount","codeContent"],["fileName","database.module.ts",3,"charsCount","codeContent"],["language","prisma",3,"code","height"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),p(4,"Input"),r(),a(5,"div",4)(6,"button",5),c("click",function(){return n.handleLoadExample()}),p(7," Load example DBML code "),r(),a(8,"div",6)(9,"button",7),c("click",function(){return n.handleConvert()}),p(10," Convert "),r(),a(11,"button",8),c("click",function(){return n.clearAll()}),p(12," Clear "),r()()()(),a(13,"div",9)(14,"app-dbml-code-editor",10),c("codeChange",function(w){return n.onDbmlInput(w)}),r()()(),a(15,"div",1)(16,"div",11)(17,"h2",12),p(18,"Output"),r(),a(19,"div",13)(20,"label",14),p(21,"Output format:"),r(),a(22,"app-expanding-circle-button",15),c("optionSelected",function(w){return n.setOutputType(w)}),r()()(),u(23,Z,5,5,"div",16)(24,ne,2,1,"div",17)(25,oe,5,5,"div",16),r()()),e&2&&(i(9),d("disabled",n.isConverting()),i(5),d("code",n.dbmlContent())("height","400px"),i(8),d("options",n.expandingButtonOptions())("selectedId",n.selectedOutputType()),i(),m(n.selectedOutputType()===n.OUTPUT_OPTIONS.json?23:-1),i(),m(n.selectedOutputType()===n.OUTPUT_OPTIONS.typeorm?24:-1),i(),m(n.selectedOutputType()===n.OUTPUT_OPTIONS.prisma?25:-1))},dependencies:[R,x,z,b,_,h,V],encapsulation:2})};export{$ as PreviewModeComponent};
